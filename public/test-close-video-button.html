<!DOCTYPE html>
<html>
<head>
    <title>Test Close Video Button</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .primary { background: #007bff; color: white; }
        .danger { background: #dc3545; color: white; }
        
        .video-chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .video-chat-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            position: relative;
            width: 80%;
            max-width: 800px;
            height: 80%;
        }
        
        .close-video {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
        }
    </style>
</head>
<body>
    <h1>Test Close Video Button</h1>
    
    <div id="test-results"></div>
    
    <button id="open-modal-btn" class="primary">Open Video Modal</button>
    <button id="test-close-btn" class="danger">Test Close Function</button>
    
    <!-- Video Chat Modal -->
    <div id="video-chat-modal" class="video-chat-modal">
        <div class="video-chat-container">
            <button class="close-video" id="close-video-btn">√ó</button>
            <h3>Video Chat Modal</h3>
            <p>This is a test modal. Click the X button to close it.</p>
            <div id="modal-status">Modal is open</div>
        </div>
    </div>
    
    <script>
        const testResults = document.getElementById('test-results');
        const modal = document.getElementById('video-chat-modal');
        const modalStatus = document.getElementById('modal-status');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logMessage = `[${timestamp}] ${message}`;
            console.log(logMessage);
            
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.textContent = logMessage;
            testResults.appendChild(resultDiv);
            testResults.scrollTop = testResults.scrollHeight;
        }
        
        // Define closeVideoChat function
        window.closeVideoChat = function() {
            log('üõë Closing video chat...', 'info');
            const modal = document.getElementById('video-chat-modal');
            if (modal) {
                modal.style.display = 'none';
                modalStatus.textContent = 'Modal is closed';
                log('‚úÖ Video chat modal closed', 'success');
            } else {
                log('‚ùå Video chat modal not found', 'error');
            }
        };
        
        // Define openVideoChat function
        window.openVideoChat = function() {
            log('üé• Opening video chat...', 'info');
            const modal = document.getElementById('video-chat-modal');
            if (modal) {
                modal.style.display = 'flex';
                modalStatus.textContent = 'Modal is open';
                log('‚úÖ Video chat modal opened', 'success');
            } else {
                log('‚ùå Video chat modal not found', 'error');
            }
        };
        
        // Test close function directly
        function testCloseFunction() {
            log('üîß Testing closeVideoChat function...', 'info');
            
            if (typeof window.closeVideoChat === 'function') {
                log('‚úÖ closeVideoChat function is available', 'success');
                window.closeVideoChat();
            } else {
                log('‚ùå closeVideoChat function is NOT available', 'error');
            }
        }
        
        // Event listeners
        document.getElementById('open-modal-btn').addEventListener('click', function() {
            window.openVideoChat();
        });
        
        document.getElementById('test-close-btn').addEventListener('click', testCloseFunction);
        
        // Add event listener for close button (like in the main file)
        document.addEventListener('DOMContentLoaded', function() {
            const closeVideoBtn = document.getElementById('close-video-btn');
            if (closeVideoBtn) {
                closeVideoBtn.addEventListener('click', function() {
                    log('‚ùå Close video button clicked', 'info');
                    if (typeof window.closeVideoChat === 'function') {
                        window.closeVideoChat();
                    } else {
                        log('‚ùå closeVideoChat function not available', 'error');
                        // Fallback: just hide the modal
                        const modal = document.getElementById('video-chat-modal');
                        if (modal) {
                            modal.style.display = 'none';
                            modalStatus.textContent = 'Modal closed via fallback';
                            log('‚úÖ Modal closed via fallback', 'success');
                        }
                    }
                });
                log('‚úÖ Close video button event listener added', 'success');
            }
        });
        
        // Auto-run tests when page loads
        window.addEventListener('load', function() {
            log('Page loaded, testing closeVideoChat function...', 'info');
            
            if (typeof window.closeVideoChat === 'function') {
                log('‚úÖ closeVideoChat function is available', 'success');
            } else {
                log('‚ùå closeVideoChat function is NOT available', 'error');
            }
        });
    </script>
</body>
</html>
